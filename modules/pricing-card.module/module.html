{# Module styles #}

{% require_css %}
  <style>
    {% scope_css %}
    
      {# Icon #}

      {% if module.styles.icon.alignment.alignment.horizontal_align %}
        .pricing-card__icon-wrapper {
          text-align: {{ module.styles.icon.alignment.alignment.horizontal_align }};
        }
      {% endif %}
    
      .pricing-card__icon {
        {% if module.styles.icon.background.color.color %}
          background-color: rgba({{ module.styles.icon.background.color.color|convert_rgb }}, {{ module.styles.icon.background.color.opacity / 100 }});
        {% endif %}
        {% if module.styles.icon.corner.radius >= 0 %}
          border-radius: {{ module.styles.icon.corner.radius ~ "px" }};
        {% endif %}
        {{ module.styles.icon.spacing.spacing.css }}
      }

      .pricing-card__icon svg {
        {% if module.styles.icon.fill.color.color %}
          fill: {{ module.styles.icon.fill.color.color }};
        {% endif %}
        {% if module.styles.icon.size.size %}
          height: {{ module.styles.icon.size.size ~ "px" }};
          width: {{ module.styles.icon.size.size ~ "px" }};
        {% endif %}
      }

      {# Features #}
      {% if module.styles.features.alignment.alignment.horizontal_align %}
        .card__features {
          text-align: {{ module.styles.features.alignment.alignment.horizontal_align }};
        }
      {% endif %}

      .card__feature-item {
        {{ module.styles.features.text.font.css }}
      }

      .card__icon svg {
        fill: {{ module.styles.features.icon.color.color }};
      }

      {# Price #}

      .card__price {
        {{ module.styles.price.text.font.css }}
        {% if module.styles.price.alignment.alignment.horizontal_align %}
          text-align: {{ module.styles.price.alignment.alignment.horizontal_align }};
        {% endif %}
      }

      {# Button wrapper #}

      {% if module.styles.button.alignment.alignment %}
        .button-wrapper {
          text-align: {{ module.styles.button.alignment.alignment.horizontal_align }};
        }
      {% endif %}

      {# Button #}

      .button {
        {% if module.styles.button.background.color.color %}
          background-color: rgba({{ module.styles.button.background.color.color|convert_rgb }}, {{ module.styles.button.background.color.opacity / 100 }});
        {% endif %}
        {{ module.styles.button.border.border.css }}
        {% if module.styles.button.corner.radius >= 0 %}
          border-radius: {{ module.styles.button.corner.radius ~ "px" }};
        {% endif %}
        {{ module.styles.button.text.font.css }}
        {{ module.styles.button.spacing.spacing.css }}
      }

      .button:hover,
      .button:focus {
        {% if module.styles.button.background.color.color %}
          background-color: rgba({{ color_variant(module.styles.button.background.color.color, -80)|convert_rgb }}, {{ module.styles.button.background.color.opacity / 100 }});
        {% endif %}
      }

      .button:active {
        {% if module.styles.button.background.color.color %}
          background-color: rgba({{ color_variant(module.styles.button.background.color.color, 80)|convert_rgb }}, {{ module.styles.button.background.color.opacity / 100 }});
        {% endif %}
      }

      {# Card #}

    .card {
      {% if module.styles.card.background.background_type == "color" and module.styles.card.background.color.color %}
        background-color: rgba({{ module.styles.card.background.color.color|convert_rgb }}, {{ module.styles.card.background.color.opacity / 100 }});
      {% elif module.styles.card.background.background_type == "gradient" %}
        background: {{ module.styles.card.background.gradient.css }};
      {% elif module.styles.card.background.background_type == "image" %}
        {{ module.styles.card.background.image.css }}
      {% endif %}
      
      {{ module.styles.card.border.border.css }}
      
      {% if module.styles.card.corner.radius >= 0 %}
        border-radius: {{ module.styles.card.corner.radius ~ "px" }};
      {% endif %}
      
      {{ module.styles.card.spacing.spacing.css }}
    }
    {% end_scope_css %}
  </style>
{% end_require_css %}

{# Sets CSS classes based on style field options #}

{% if module.styles.icon.presets.icon_size == "small" %}
  {% set icon_size = "icon--small" %}
{% elif module.styles.icon.presets.icon_size == "large" %}
  {% set icon_size = "icon--large" %}
{% endif %}

{% if module.styles.icon.presets.icon_color == "light" %}
  {% set icon_color = "icon--light" %}
{% endif %}

{% if module.styles.icon.presets.icon_shape == "square" %}
  {% set icon_shape = "icon--square" %}
{% endif %}

{% if module.styles.button.presets.button_style == "primary" %}
  {% set button_style = "button--primary" %}
{% elif module.styles.button.presets.button_style == "secondary" %}
  {% set button_style = "button--secondary" %}
{% elif module.styles.button.presets.button_style == "simple" %}
  {% set button_style = "button--simple" %}
{% endif %}

{% if module.styles.button.presets.button_size == "small" %}
  {% set button_size = "button--small" %}
{% elif module.styles.button.presets.button_size == "large" %}
  {% set button_size = "button--large" %}
{% endif %}

{% if module.button.icon.position == "right" %}
  {% set icon_position = "button--icon-right" %}
{% endif %}

{% if module.styles.card.presets.card_style == "dark" %}
  {% set card_style = "card--dark" %}
  {% set button_mode = "button--dark" %}
{% elif module.styles.card.presets.card_style == "light" %}
  {% set card_style = "card--light" %}
{% endif %}

{# Pricing card #}

<section class="card card--pricing {{ card_style }}">
  
  <div class="pricing-card__icon-wrapper">
    <span class="{{ icon_size }} {{ icon_color }} {{ icon_shape }}">
      {% icon
        extra_classes="pricing-card__icon icon"
        name="{{ module.icon.icon.name }}"
        purpose="{{ module.icon.accessibility_options.purpose }}"
        style="{{ module.icon.icon.type }}"
        title="{{ module.icon.accessibility_options.title }}"
        icon_set="{{ module.icon.icon.icon_set }}"
        unicode="{{ module.icon.icon.unicode }}"
      %}
    </span>
  </div>
  
  {% if module.tier and module.description %}
    <div class="card__header">
      <div class="tier">
        {% if module.tier %}
          {{ module.tier }}
        {% endif %}
      </div>
      <div class="description">
        {% if module.description %}
          {{ module.description }}
        {% endif %}
      </div>
    </div>
  {% endif %}
  
  <div class="card__body">
    <P style="margin-bottom: 10px;">This pass includes:</P>
    <ul class="card__features">
      {% for feature in module.features %}
        <li class="card__feature-item">
          {% icon
            extra_classes="card__icon",
            name="{{ module.feature_icon.name }}",
            purpose="decorative",
            style="{{ module.feature_icon.type }}",
            unicode="{{ module.feature_icon.unicode }}"
          %}{{ feature }}
        </li>
      {% endfor %}
    </ul>
    
    <div class="card__button-wrapper button-wrapper">
      {% set href = module.button_link.url.href %}
      {% if module.button_link.url.type is equalto "EMAIL_ADDRESS" %}
        {% set href = "mailto:" + href %}
      {% endif %}
      <a href="{{ href }}"
        class="button {{ button_style }} {{ button_size }} {{button_mode}} {{ icon_position }}"
        {% if module.button_link.open_in_new_tab %}target="_blank"{% endif %}
        {% if module.button_link.rel %}rel="{{ module.button_link.rel }}"{% endif %}
        >
        {{ module.button_text }}
      </a>
    </div>
  </div>
</section>